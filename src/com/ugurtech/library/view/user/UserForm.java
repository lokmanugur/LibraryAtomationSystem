/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package com.ugurtech.library.view.user;
import com.ugurtech.library.view.person.PersonForm;
import com.ugurtech.library.controller.UserFormController;
import com.ugurtech.library.view.MainFrame;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JInternalFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;
import org.jdesktop.swingx.JXDatePicker;
import org.jdesktop.swingx.autocomplete.AutoCompleteDecorator;


/**
 *
 * @author lokman uğur
 */
public final class UserForm extends JInternalFrame {

    private static UserForm userForm;   
    private final UserFormController userFormController;
    
    private UserForm() {
        initComponents();
        this.userFormController = new UserFormController(this);
        AutoCompleteDecorator.decorate(personComboBox);
        AutoCompleteDecorator.decorate(userTypeComboBox);
        setLocation(getWidth()/2,getHeight()/10);
    }
    
    public static UserForm getInstance(){
        if(userForm==null)
            return userForm = new UserForm();
        else
            return userForm;
    }
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        addUserPanel = new javax.swing.JPanel();
        labelKullaniciSifre = new javax.swing.JLabel();
        saveButton = new javax.swing.JButton();
        cancelButton = new javax.swing.JButton();
        labelKullaniciSifreTekrar = new javax.swing.JLabel();
        labelKullaniciAdi = new javax.swing.JLabel();
        loginNameTextField = new javax.swing.JTextField();
        passwordTextField = new javax.swing.JPasswordField();
        passMatchTextField = new javax.swing.JPasswordField();
        checkLabel = new javax.swing.JLabel();
        personComboBox = new javax.swing.JComboBox();
        labelPersonel = new javax.swing.JLabel();
        userTypeComboBox = new javax.swing.JComboBox();
        labelKullaniciTipi = new javax.swing.JLabel();
        cancelButton1 = new javax.swing.JButton();

        setClosable(true);
        setIconifiable(true);
        setMaximizable(true);
        setResizable(true);
        setTitle("Kullanıcı Ekleme Formu");

        addUserPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)), "Kulanıcı Ekle", javax.swing.border.TitledBorder.LEFT, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Arial", 1, 14))); // NOI18N

        labelKullaniciSifre.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        labelKullaniciSifre.setText("Şifresi:");

        saveButton.setText("Kaydet");
        saveButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                saveButtonActionPerformed(evt);
            }
        });

        cancelButton.setText("Reset");
        cancelButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cancelButtonActionPerformed(evt);
            }
        });

        labelKullaniciSifreTekrar.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        labelKullaniciSifreTekrar.setText("Şifresi Tekrar:");

        labelKullaniciAdi.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        labelKullaniciAdi.setText("Kulanıcı Adı:");

        passMatchTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                passMatchTextFieldKeyReleased(evt);
            }
        });

        checkLabel.setFont(new java.awt.Font("Ubuntu", 1, 18)); // NOI18N
        checkLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);

        personComboBox.setEditable(true);
        personComboBox.addPopupMenuListener(new javax.swing.event.PopupMenuListener() {
            public void popupMenuCanceled(javax.swing.event.PopupMenuEvent evt) {
            }
            public void popupMenuWillBecomeInvisible(javax.swing.event.PopupMenuEvent evt) {
            }
            public void popupMenuWillBecomeVisible(javax.swing.event.PopupMenuEvent evt) {
                personComboBoxPopupMenuWillBecomeVisible(evt);
            }
        });

        labelPersonel.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        labelPersonel.setText("Kullanıcı:");

        userTypeComboBox.setEditable(true);
        userTypeComboBox.addPopupMenuListener(new javax.swing.event.PopupMenuListener() {
            public void popupMenuCanceled(javax.swing.event.PopupMenuEvent evt) {
            }
            public void popupMenuWillBecomeInvisible(javax.swing.event.PopupMenuEvent evt) {
            }
            public void popupMenuWillBecomeVisible(javax.swing.event.PopupMenuEvent evt) {
                userTypeComboBoxPopupMenuWillBecomeVisible(evt);
            }
        });

        labelKullaniciTipi.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        labelKullaniciTipi.setText("Kullanıcı Tipi:");

        cancelButton1.setText("Kişi Ekle");
        cancelButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cancelButton1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout addUserPanelLayout = new javax.swing.GroupLayout(addUserPanel);
        addUserPanel.setLayout(addUserPanelLayout);
        addUserPanelLayout.setHorizontalGroup(
            addUserPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, addUserPanelLayout.createSequentialGroup()
                .addGroup(addUserPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(addUserPanelLayout.createSequentialGroup()
                        .addGap(129, 129, 129)
                        .addComponent(checkLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 256, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, addUserPanelLayout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(addUserPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(labelPersonel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(labelKullaniciTipi, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(labelKullaniciAdi, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(labelKullaniciSifre, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(labelKullaniciSifreTekrar, javax.swing.GroupLayout.PREFERRED_SIZE, 105, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(addUserPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(userTypeComboBox, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(personComboBox, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(loginNameTextField)
                            .addComponent(passwordTextField)
                            .addComponent(passMatchTextField))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)))
                .addGroup(addUserPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(saveButton, javax.swing.GroupLayout.DEFAULT_SIZE, 84, Short.MAX_VALUE)
                    .addComponent(cancelButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(cancelButton1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        addUserPanelLayout.setVerticalGroup(
            addUserPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(addUserPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(addUserPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(addUserPanelLayout.createSequentialGroup()
                        .addComponent(saveButton, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(addUserPanelLayout.createSequentialGroup()
                        .addGroup(addUserPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(userTypeComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(labelKullaniciTipi, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(addUserPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(addUserPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(personComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(cancelButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(labelPersonel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(addUserPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(labelKullaniciAdi, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(loginNameTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(cancelButton, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(addUserPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(passwordTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(labelKullaniciSifre, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(addUserPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(labelKullaniciSifreTekrar, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(passMatchTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addComponent(checkLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(15, 15, 15))
        );

        personComboBox.getEditor().getEditorComponent().addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                personComboBoxKeyReleased(evt);
            }
        });
        userTypeComboBox.getEditor().getEditorComponent().addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                userTypeComboBoxKeyReleased(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(addUserPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(addUserPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void passMatchTextFieldKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_passMatchTextFieldKeyReleased
        userFormController.checkPassword();
    }//GEN-LAST:event_passMatchTextFieldKeyReleased

    private void cancelButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cancelButtonActionPerformed
        clearTextField();
    }//GEN-LAST:event_cancelButtonActionPerformed

    private void saveButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_saveButtonActionPerformed
        userFormController.addUser();
        UserTableForm.getInstance().updateUserTable();
    }//GEN-LAST:event_saveButtonActionPerformed

    private void cancelButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cancelButton1ActionPerformed
        MainFrame.getInstance().addDesktopPane(PersonForm.getInstance());
    }//GEN-LAST:event_cancelButton1ActionPerformed

    private void personComboBoxPopupMenuWillBecomeVisible(javax.swing.event.PopupMenuEvent evt) {//GEN-FIRST:event_personComboBoxPopupMenuWillBecomeVisible
        userFormController.allPerson();
    }//GEN-LAST:event_personComboBoxPopupMenuWillBecomeVisible

    private void userTypeComboBoxPopupMenuWillBecomeVisible(javax.swing.event.PopupMenuEvent evt) {//GEN-FIRST:event_userTypeComboBoxPopupMenuWillBecomeVisible
        userFormController.allUserType();
    }//GEN-LAST:event_userTypeComboBoxPopupMenuWillBecomeVisible

    private void personComboBoxKeyReleased(java.awt.event.KeyEvent evt) {

    }
    
    private void userTypeComboBoxKeyReleased(java.awt.event.KeyEvent evt){
    
    }
    
    public void clearTextField(){
    
        personComboBox.removeAllItems();
        userTypeComboBox.removeAllItems();
        loginNameTextField.setText(null);
        passwordTextField.setText(null);
        passMatchTextField.setText(null);
        checkLabel.setText(null);
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel addUserPanel;
    private javax.swing.JButton cancelButton;
    private javax.swing.JButton cancelButton1;
    private javax.swing.JLabel checkLabel;
    private javax.swing.JLabel labelKullaniciAdi;
    private javax.swing.JLabel labelKullaniciSifre;
    private javax.swing.JLabel labelKullaniciSifreTekrar;
    private javax.swing.JLabel labelKullaniciTipi;
    private javax.swing.JLabel labelPersonel;
    private javax.swing.JTextField loginNameTextField;
    private javax.swing.JPasswordField passMatchTextField;
    private javax.swing.JPasswordField passwordTextField;
    private javax.swing.JComboBox personComboBox;
    private javax.swing.JButton saveButton;
    private javax.swing.JComboBox userTypeComboBox;
    // End of variables declaration//GEN-END:variables

    public JButton getCancelButton() {
        return cancelButton;
    }

    public void setCancelButton(JButton cancelButton) {
        this.cancelButton = cancelButton;
    }

    public JTextField getLoginNameTextField() {
        return loginNameTextField;
    }

    public void setLoginNameTextField(JTextField loginNameTextField) {
        this.loginNameTextField = loginNameTextField;
    }

    public JPasswordField getPassMatchTextField() {
        return passMatchTextField;
    }

    public void setPassMatchTextField(JPasswordField passMatchTextField) {
        this.passMatchTextField = passMatchTextField;
    }

    public JPasswordField getPasswordTextField() {
        return passwordTextField;
    }

    public void setPasswordTextField(JPasswordField passwordTextField) {
        this.passwordTextField = passwordTextField;
    }

    public JComboBox getPersonComboBox() {
        return personComboBox;
    }

    public void setPersonComboBox(JComboBox personComboBox) {
        this.personComboBox = personComboBox;
    }

    public JButton getSaveButton() {
        return saveButton;
    }

    public void setSaveButton(JButton saveButton) {
        this.saveButton = saveButton;
    }

    public JComboBox getUserTypeComboBox() {
        return userTypeComboBox;
    }

    public void setUserTypeComboBox(JComboBox userTypeComboBox) {
        this.userTypeComboBox = userTypeComboBox;
    }

    public JPanel getAddUserPanel() {
        return addUserPanel;
    }

    public void setAddUserPanel(JPanel addUserPanel) {
        this.addUserPanel = addUserPanel;
    }

    public JLabel getLabelKullaniciAdi() {
        return labelKullaniciAdi;
    }

    public void setLabelKullaniciAdi(JLabel labelKullaniciAdi) {
        this.labelKullaniciAdi = labelKullaniciAdi;
    }

    public JLabel getLabelKullaniciSifre() {
        return labelKullaniciSifre;
    }

    public void setLabelKullaniciSifre(JLabel labelKullaniciSifre) {
        this.labelKullaniciSifre = labelKullaniciSifre;
    }

    public JLabel getLabelKullaniciSifreTekrar() {
        return labelKullaniciSifreTekrar;
    }

    public void setLabelKullaniciSifreTekrar(JLabel labelKullaniciSifreTekrar) {
        this.labelKullaniciSifreTekrar = labelKullaniciSifreTekrar;
    }

    public JLabel getLabelKullaniciTipi() {
        return labelKullaniciTipi;
    }

    public void setLabelKullaniciTipi(JLabel labelKullaniciTipi) {
        this.labelKullaniciTipi = labelKullaniciTipi;
    }

    public JLabel getLabelPersonel() {
        return labelPersonel;
    }

    public void setLabelPersonel(JLabel labelPersonel) {
        this.labelPersonel = labelPersonel;
    }

    public JLabel getCheckLabel() {
        return checkLabel;
    }

    public void setCheckLabel(JLabel checkLabel) {
        this.checkLabel = checkLabel;
    }
    
    
}
